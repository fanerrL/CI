# 工作流的名称
name: Python CI

# 触发条件：当有代码 push 到 main 分支时
on:
  push:
    branches: [ "main" ]

# 定义要执行的任务
jobs:
  build-and-test:
    # 运行环境：使用最新的 Ubuntu 系统
    runs-on: ubuntu-latest

    # 任务步骤
    steps:
      # 第一步：检出代码，这样工作流才能访问你的仓库代码
      - name: Checkout code
        uses: actions/checkout@v4

      # 第二步：设置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10' # 指定 Python 版本

      # 第三步：安装依赖
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      # 第四步：运行测试
      - name: Run tests with pytest
        run: pytest
